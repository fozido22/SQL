## Функции работы с датой и временем в PostgreSQL

Для хранения даты и времени в PostgreSQL предусмотрен специальный тип timestamp. С физической точки зрения это дробное число, целая часть которого хранит количество дней с некоторой базовой даты, а дробная – время. Это позволяет совершать над датами арифметические операции – сложение и вычитание.

Функция __NOW__

Это одна из самых часто употребляемых функций, она возвращает текущую дату и время по часам сервера.

__Пример:__
```
SELECT NOW();

```

Функция __JUSTIFY_INTERVAL__

Функция __JUSTIFY_INTERVAL(interval)__ преобразует интервал (тип interval), указанный в виде строки в соответствующее значение типа timestamp.

__Пример:__
```
SELECT NOW() D1,
     NOW() + JUSTIFY_INTERVAL(interval '40 days 25 hours') D2,
     NOW() - JUSTIFY_INTERVAL(interval '40 days 25 hours') D3;
```

Функция __DATE_TRUNC__

Функция __DATE_TRUNC(timestamp)__ используется для обрезки даты или интервала (DATE_TRUNC(interval)) до определенной точности.

__Пример:__
```
SELECT
 DATE_TRUNC('HOUR', NOW()) D1,
 DATE_TRUNC('DAY', NOW()) D2,
 DATE_TRUNC('MONTH', NOW()) D3;
```
__Получение начала и конца месяца__

Для получения дат соответствующих началу и концу месяца необходимо использовать функции DATE_TRUNC и JUSTIFY_INTERVAL.

__Пример:__
```
SELECT
 DATE_TRUNC('MONTH', NOW()) D1,
 DATE_TRUNC('MONTH', NOW())
     + JUSTIFY_INTERVAL('1 MONTH - 1 DAY') D2;
```

Функция __AGE__

Функция AGE([end_date,]start_date) возвращает разницу между датами, обозначенными как end_date и start_date. Если параметр end_date опущен, то используется значение глобальной переменной CURRENT_DATE, которая содержит текущую дату (тип date, дата без времени).

__Пример:__
```
SELECT CURRENT_DATE D1,
AGE(MAKE_TIMESTAMP(2019, 7, 15, 8, 15, 23.5)) D2; 
```

Функция __EXTRACT__

Функция EXTRACT(field FROM timestamp) извлекает элемент даты field из значения типа timestamp. Также существует функция EXTRACT(field FROM interval) для работы со значениями типа interval.

__Пример:__
```
SELECT NOW() D1,
EXTRACT(MONTH FROM NOW()) D2,
EXTRACT(YEAR FROM NOW()) D3,
EXTRACT(MINUTE FROM NOW()) D4;
```
Количество месяцев между двумя датами

Функции EXTRACT, AGE и DATE_TRUNC могут быть использованы для нахождения количества месяцев между двумя датами.

__Пример:__
```
SELECT NOW() D1,
EXTRACT(MONTH FROM AGE(DATE_TRUNC('MONTH', NOW()), DATE_TRUNC('MONTH', MAKE_DATE(2024, 5, 3)))) D2;
```

Функция __TO_DATE__

Функция TO_DATE(str, mask) преобразует строку str в дату. Преобразование ведется по маске mask.

__Пример:__
```
SELECT TO_DATE('2024/07/22', 'yyyy/mm/dd') D1,
TO_DATE('15.12.2023', 'dd.mm.yy') D2;
```


Функция __TO_CHAR__

Функция TO_CHAR(date, mask) преобразует дату date в символь- ную строку в соответствии с заданной маской.

__Пример:__
```
SELECT NOW() D1,
  TO_CHAR(NOW(), 'DD.MM.YY HH24:MI') D2;
```

__Маски для форматирования даты и времени__

| __Маска__              | __Назначение__                             |
|------------------------|--------------------------------------------|
| СС                     | Номер века                                 |
| YYYY,илиYY             | Четыре или последние две цифры номера года |
| Q                      | Номер квартала                             |
| MONTH, или MON, или MM | Строковое или числовое номера месяца       |
| WW                     | Номер недели в году                        |
| W                      | Номер недели в месяце                      |
| DDD                    | Номер дня в году                           |
| DD                     | Номер дня в месяце                         |
| DAY, илиDY, илиID      | Номер дня недели                           |
| HH, или HH12, или HH24 | Час                                        |
| MI                     | Минута                                     |

__Постановка задачи:__ В соответствии с вариантами индивидуальных заданий, выбранными в рамках лабораторной работы (L1.md), выполните задания:
1. Получить дату начала текущей недели в SQL для выбранных записей.
2. Получить выборку с первого числа текущего месяца по текущий день недели в SQL для выбранных записей.
3. Найти всех пользователей у которых день рождение в следующем месяце.